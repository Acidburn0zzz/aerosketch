<!DOCTYPE html>
<head>
<title>SVG</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link rel="stylesheet/less" type="text/css" href="less/draw.less">
<script src="js/lib/less/less.min.js" type="text/javascript"></script>
</head>
<body data-bind="event:{contextmenu:function(){}}">
<div class="surface" data-bind="surface:trigger" style="cursor:default">
	<svg class="canvas" version="1.1" xmlns="http://www.w3.org/2000/svg" >
		<rect width="100%" height="100%" 
		data-bind="attr:{fill:background}"/>

		<g data-bind="attr:{transform:transform},foreach:layers">
			<g data-bind="visible:visible,template:shapesTemplate" ></g>
		</g>
		<g data-bind="template:controlsTemplate" ></g>
		<g data-bind="template:toolTemplate" ></g>
	</svg>
	<canvas data-bind="buffer:true" class="buffer"></canvas>
</div>
<div class="left">
	<div class="nav">
		<ul data-bind="foreach:tools" class="tools">
			<li data-bind="html:iconView, 
			css:{on:$root.tool()==$data}, 
			event:{
				mousedown:$root.tool,
				touchstart:$root.tool
			}"></li>
		</ul>
	</div>
</div>
<div class="bottom" >
	<div class="nocolor" data-bind="hammer:{tap:noColor}">
		<span class="draw-icon-cross"></span>
	</div>
	<ul class="palette" data-bind="palette:color,foreach:palette">
		<li data-bind="style:{left:(100*$index()/$root.palette.length)+'%',background:$data}"></li>
	</ul>
</div>
<div class="color-toggle" 
	data-bind="with:options, 
	hammer:{tap:toggleColorMode,hold:swapColor},
	hammerOptions:{tap_double:false}">
	<div class="fill" data-bind="
		style:{background:fill,zIndex:$root.colorMode()=='fill'? 2:1},
		if:fill()=='none'">
		<span class="draw-icon-cross" ></span>
	</div>
	<div class="stroke" data-bind="if:stroke()=='none',
		style:{background:stroke,zIndex:$root.colorMode()=='stroke'? 2:1}">
		<span class="draw-icon-cross" ></span>
	</div>
</div>
<div class="toolbar-top-left btn-toolbar" 
data-bind="template:toolbarTemplate"></div>
<div class="toolbar-top-right btn-toolbar">
	<div class="btn-group">
		<!-- ko if:selection().length > 0 -->
		<button class="btn" data-bind="hammer:{tap:cut}">
			<i class="icon-cut icon-large"></i>
		</button>
		<button class="btn" data-bind="hammer:{tap:copy}">
			<i class="icon-copy icon-large"></i>
		</button>
		<!-- /ko -->
		<!-- ko if:clipboard().length > 0 -->
		<button class="btn" data-bind="hammer:{tap:paste}">
			<i class="icon-paste icon-large"></i>
		</button>
		<!-- /ko -->
	</div>
	<div class="btn-group">
		<button class="btn" data-bind="hammer:{tap:undo},hammerOptions:{tap_double:false}">
			<i class="icon-undo icon-large"></i>
		</button>
		<button class="btn" data-bind="hammer:{tap:redo},hammerOptions:{tap_double:false}">
			<i class="icon-repeat icon-large"></i>
		</button>
	</div>
</div>
<div class="toolbar-bottom-right btn-toolbar">
	<div class="btn-group">
		<button class="btn btn-primary">Done</button>
	</div>
</div>
<script type="text/javascript" data-main="js/main" src="js/lib/require/require.js"></script>
</body>
</html>

