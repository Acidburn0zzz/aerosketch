<!DOCTYPE html>
<head>
<title>SVG</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet/less" type="text/css" href="less/draw.less">
<script src="js/lib/less/less.min.js" type="text/javascript"></script>
</head>
<body data-bind="event:{contextmenu:function(){}}">
<div class="canvas" data-bind="canvas:true" style="cursor:default">
	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" >
		<rect width="100%" height="100%" 
			data-bind="attr:{fill:background}" />

		<g data-bind="attr:{transform:transform},foreach:layers" >
			<g data-bind="visible:visible,template:shapesTemplate" ></g>
		</g>

		<g data-bind="foreach:selection" fill="black" fill-opacity="0" 
		stroke="blue" opacity="1" stroke-width="1" 
		stroke-dasharray="5, 3" >
			<rect data-bind="attr:$root.selectedBBox($data)" />
		</g>

		<g data-bind="template:toolTemplate" ></g>
		<g data-bind="template:controlsTemplate" ></g>

	</svg>
</div>
<div class="left">
	<div class="nav">
		<ul data-bind="foreach:tools" class="tools">
			<li data-bind="html:iconView, 
			css:{on:$root.tool()==$data}, 
			hammer:{tap: $root.tool}"></li>
		</ul>
	</div>
</div>
<div class="palette" >
	<div class="nocolor" data-bind="hammer:{tap:noColor}">
		<span class="draw-icon-cross"></span>
	</div>
	<ul data-bind="
		foreach:palette, palette:color">
		<li data-bind="style:{
			background:$data,
			width:(100/$root.palette.length)+'%'
		}">
		</li>
	</ul>
</div>
<div class="color-toggle" 
	data-bind="with:options, 
	hammer:{tap:toggleColorMode,hold:swapColor},
	hammerOptions:{tap_double:false}">
	<div class="fill" data-bind="
	style:{background:fill,zIndex:$root.colorMode()=='fill'? 2:1},
	if:fill()=='none'">
		<span class="draw-icon-cross" ></span>
	</div>
	<div class="stroke" data-bind="if:stroke()=='none',
	style:{background:stroke,zIndex:$root.colorMode()=='stroke'? 2:1}">
		<span class="draw-icon-cross" ></span>
	</div>
</div>
<div class="toolbar-top-left btn-toolbar">
</div>
<div class="toolbar-top-right btn-toolbar">
	<!-- ko if:selection().length > 0 -->
	<div class="btn-group">
		<button class="btn" data-bind="hammer:{tap:deselect}">
			<i class="icon-remove-circle icon-large"></i>
		</button>
	</div>
	<!-- /ko -->
	<div class="btn-group">
		<!-- ko if:selection().length > 0 -->
		<button class="btn" data-bind="hammer:{tap:cut}">
			<i class="icon-cut icon-large"></i>
		</button>
		<button class="btn" data-bind="hammer:{tap:copy}">
			<i class="icon-copy icon-large"></i>
		</button>
		<!-- /ko -->
		<!-- ko if:clipboard().length > 0 -->
		<button class="btn" data-bind="hammer:{tap:paste}">
			<i class="icon-paste icon-large"></i>
		</button>
		<!-- /ko -->
	</div>
	<div class="btn-group">
		<button class="btn">
			<i class="icon-undo icon-large"></i>
		</button>
		<button class="btn">
			<i class="icon-repeat icon-large"></i>
		</button>
	</div>
	<div class="btn-group">
		<button class="btn dropdown-toggle" data-toggle="dropdown" 
			data-bind="dropdown:true">
			<i class="icon-reorder icon-large"></i>
		</button>
		<ul class="dropdown-menu pull-right" >
			<li><a data-bind="hammer:{}" href="#">Layers</a></li>
			<li><a data-bind="hammer:{}" href="#">Properties</a></li>
			<li class="divider"></li>
			<li><a data-bind="hammer:{}" href="#">Reset Canvas</a></li>
		</ul>
	</div>
</div>
<div class="toolbar-bottom-right btn-toolbar">
	<div class="btn-group">
		<button class="btn btn-primary">Done</button>
	</div>
</div>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="js/lib/require/require.js"></script>
<script type="text/javascript">
require([
	'knockout','draw',

	'draw.palette','draw.clipboard',
	'draw.controls!strokesize,transform',
	'draw.tools!freehand|pointer,hand,freehand,path,ellipse,rect',

	'binding/canvas','binding/hammer',
	'binding/dropdown','binding/palette'
],function(ko,Draw){
	ko.applyBindings(Draw,document.body);
	window.Draw = Draw;
});
</script>
</body>
</html>

